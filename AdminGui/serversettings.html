<div class="serversettings">
	<div class="row">
		<div class="tabbable tabs-left col-md-2">
			<ul class="nav nav-tabs" style="width: 100%"> 
				<li class="basicServerSettingsLink active"><a>Server Settings</a></li>
				<li class="migrationsLink"><a>Migrations</a></li>
				<li class="pluginsLink"><a>Plugins</a></li>
				<li class="webModulesLink"><a>Web Modules</a></li>
				<li class="extendedDataSchemasLink"><a>Extended Data Schemas</a></li>
				<li class="modelCheckersLink"><a>Model Checkers</a></li>
			</ul>
		</div>
		<div class="tab-content col-md-10">
		</div>
	</div>
</div>
<script>
	function ServerSettings(main, loadHistory) {
		var othis = this;

		this.show = function(){
		};
		
		othis.pageChanger = new PageChanger($(".serversettings .nav"), $(".serversettings .tab-content"));
		
		this.showAddExtendedDataSchema = function(extendedDataSchema, callback) {
			othis.pageChanger.changePage($(".extendedDataSchemasLink"), "addextendeddataschema.html", function(){
				pushHistory({page: "ServerSettings", subpage: "AddExtendedDataSchema"}, "Server Settings");
				return new AddExtendedDataSchema(main, othis, extendedDataSchema);
			}, callback);
		};

		this.showAddRepoExtendedDataSchema = function(callback) {
			othis.pageChanger.changePage($(".extendedDataSchemasLink"), "addrepoextendeddataschema.html", function(){
				pushHistory({page: "ServerSettings", subpage: "AddRepoExtendedDataSchema"}, "Server Settings");
				return new AddRepoExtendedDataSchema(main, othis);
			}, callback);
		};
		
		this.showAddNewModelChecker = function(modelChecker, callback) {
			othis.pageChanger.changePage($(".modelCheckersLink"), "addnewmodelchecker.html", function(){
				pushHistory({page: "ServerSettings", subpage: "AddNewModelChecker"}, "Server Settings");
				return new AddNewModelChecker(main, othis, modelChecker);
			}, callback);
		};

		this.showAddRepoModelChecker = function(callback) {
			othis.pageChanger.changePage($(".modelCheckersLink"), "addrepomodelchecker.html", function(){
				pushHistory({page: "ServerSettings", subpage: "AddRepoModelChecker"}, "Server Settings");
				return new AddRepoModelChecker(main, othis);
			}, callback);
		};
		
		this.showExtendedDataSchema = function(oid, callback) {
			othis.pageChanger.changePage($(".extendedDataSchemasLink"), "extendeddataschema.html", function(){
				return new ExtendedDataSchema(main, oid);
				pushHistory({page: "ServerSettings", subpage: "ExtendedDataSchema"}, "Extended Data Schema");
			}, callback);
		};
		
		this.showModelChecker = function(oid, callback) {
			othis.pageChanger.changePage($(".modelCheckersLink"), "modelchecker.html", function(){
				pushHistory({page: "ServerSettings", subpage: "ModelChecker"}, "Model Checker");
				return new ModelChecker(main, oid);
			}, callback);
		};

		this.showBasicServerSettings = function(callback) {
			othis.pageChanger.changePage($(".basicServerSettingsLink"), "basicserversettings.html", function(){
				pushHistory({page: "ServerSettings", subpage: "BasicServerSettings"}, "Basic Server Settings");
				return new BasicServerSettings(main, othis);
			}, callback);
		};

		this.showMigrations = function(callback) {
			othis.pageChanger.changePage($(".migrationsLink"), "migrations.html", function(){
				pushHistory({page: "ServerSettings", subpage: "Migrations"}, "Server Settings");
				return new Migrations(main, othis);
			}, callback);
		};

		this.showPlugins = function(callback) {
			othis.pageChanger.changePage($(".pluginsLink"), "plugins.html", function(){
				return new Plugins(main, othis);
			}, callback);
		};

		this.showWebModules = function(callback) {
			othis.pageChanger.changePage($(".webModulesLink"), "webmodules.html", function(){
				pushHistory({page: "ServerSettings", subpage: "WebModules"}, "Server Settings");
				return new WebModules(main, othis);
			}, callback);
		};

		this.showModelCheckers = function(callback) {
			othis.pageChanger.changePage($(".modelCheckersLink"), "modelcheckers.html", function(){
				pushHistory({page: "ServerSettings", subpage: "ModelCheckers"}, "Server Settings");
				return new ModelCheckers(main, othis);
			}, callback);
		};

		this.showExtendedDataSchemas = function(callback) {
			othis.pageChanger.changePage($(".extendedDataSchemasLink"), "extendeddataschemas.html", function(){
				pushHistory({page: "ServerSettings", subpage: "ExtendedDataSchemas"}, "Server Settings");
				return new ExtendedDataSchemas(main, othis);
			}, callback);
		};
		
		this.close = function() {
		};
		
		this.getName = function() {
			return "ServerSettings";
		};

		if (loadHistory) {
			var history = History.getState().data;
			if (history.subpage == "BasicServerSettings") {
				othis.showBasicServerSettings();
			} else if (history.subpage == "Migrations") {
				othis.showMigrations();
			} else if (history.subpage == "Plugins") {
				othis.showPlugins();
			} else if (history.subpage == "WebModules") {
				othis.showWebModules();
			} else if (history.subpage == "ModelCheckers") {
				othis.showModelCheckers();
			} else if (history.subpage == "ExtendedDataSchemas") {
				othis.showExtendedDataSchemas();
			} else if (history.subpage == "ExtendedDataSchema") {
				othis.showExtendedDataSchema(history.edsid);
			} else {
				othis.showBasicServerSettings();
			}
		}

		$(".serversettings .basicServerSettingsLink").click(function(){othis.showBasicServerSettings(null, true)});
		$(".serversettings .migrationsLink").click(function(){othis.showMigrations(null, true)});
		$(".serversettings .pluginsLink").click(function(){
			pushHistory({page: "ServerSettings", subpage: "Plugins"}, "Server Settings");
			othis.showPlugins(null, true)
		});
		$(".serversettings .webModulesLink").click(function(){othis.showWebModules(null, true)});
		$(".serversettings .modelCheckersLink").click(function(){othis.showModelCheckers(null, true)});
		$(".serversettings .extendedDataSchemasLink").click(function(){othis.showExtendedDataSchemas(null, true)});
	}
</script>